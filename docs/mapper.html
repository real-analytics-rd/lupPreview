---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "04_mapper.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 04_mapper.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Import-Libraries-and-Modules">Import Libraries and Modules<a class="anchor-link" href="#Import-Libraries-and-Modules"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PreviewsMapping-Class">PreviewsMapping Class<a class="anchor-link" href="#PreviewsMapping-Class"> </a></h3><h5 id="This-class-represents-a-mapper-from-the-&quot;Opta&quot;-MongoDb-database-and-has-3-functions:">This class represents a mapper from the "Opta" MongoDb database and has 3 functions:<a class="anchor-link" href="#This-class-represents-a-mapper-from-the-&quot;Opta&quot;-MongoDb-database-and-has-3-functions:"> </a></h5><p>1- <b> get_team_id </b> returns the "opta" ID of a given team.</p>
<p>&emsp;The use of a predefined dictionary containing the teams and their various names facilitates us in matching the team names extracted from the guardian and <br>&emsp;their IDs in the opta database. The use of a dictionary was required because the team names in the previews differ and sometimes use abbreviations or<br>&emsp;nicknames.</p>
<p>2- <b> get_game_id_date </b>returns the id and the date of a given game.</p>
<p>&emsp;After completing the scraping task and extracting the information, the previews must be matched with their ids in the opta.fixture database.
We will query this <br>&emsp;database by specifying the home team, the away team, the closest gamedate to the preview publication date, and the Premier League competitionId, which  <br>&emsp;is equal to 8 in the database.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PreviewsMapping" class="doc_header"><code>class</code> <code>PreviewsMapping</code><a href="https://github.com/MeherKharbachi/guardian_scraper/tree/master/guardian_scraper/mapper.py#L14" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PreviewsMapping</code>()</p>
</blockquote>
<p>A class to represent a data mapper from a mongo database.</p>
<p>...</p>
<h2 id="Methods">Methods<a class="anchor-link" href="#Methods"> </a></h2><p>get_team_id(team_name, df_teams)
    returns the "opta" ID of a given team.
get_game_id_date(home_team_id, away_team_id, preview_date)
    returns the id and the date of a given game.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

